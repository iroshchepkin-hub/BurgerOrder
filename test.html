<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>–ú–µ–Ω—é –±—É—Ä–≥–µ—Ä–æ–≤</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: Arial; padding: 20px; background:#f1f8e9; text-align:center; }
    .burger { display:inline-block; background:#c5e1a5; padding:12px; margin:10px; border-radius:8px; width:160px; }
    button { background:#689f38; color:#fff; padding:8px 12px; border:none; border-radius:6px; cursor:pointer; }
  </style>
</head>
<body>
  <h2>üçî –ú–µ–Ω—é</h2>

  <div class="burger">
    <strong>–ß–∏–∑–±—É—Ä–≥–µ—Ä</strong>
    <p>400 ‚ÇΩ</p>
    <button onclick="addToCart('–ß–∏–∑–±—É—Ä–≥–µ—Ä', 400)">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>

  <div class="burger">
    <strong>–°—ç–Ω–¥–≤–∏—á</strong>
    <p>350 ‚ÇΩ</p>
    <button onclick="addToCart('–°—ç–Ω–¥–≤–∏—á', 350)">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function () {
      if (typeof Telegram === 'undefined' || !Telegram.WebApp) {
        alert("–û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ Telegram (–∫–Ω–æ–ø–∫—É –º–µ–Ω—é –±–æ—Ç–∞).");
        console.log("Telegram.WebApp undefined");
        return;
      }
      Telegram.WebApp.ready();
      console.log("WebApp ready, initDataUnsafe:", Telegram.WebApp.initDataUnsafe);
    });

    function addToCart(name, price) {
      const payload = { name: name, price: price };
      console.log("sendData ->", payload);
      try {
        Telegram.WebApp.sendData(JSON.stringify(payload));
        alert(name + " –¥–æ–±–∞–≤–ª–µ–Ω(–∞) –≤ –∫–æ—Ä–∑–∏–Ω—É");
      } catch (e) {
        console.error("sendData error:", e);
        alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö WebApp. –°–º–æ—Ç—Ä–∏ –∫–æ–Ω—Å–æ–ª—å.");
      }
    }
  </script>
</body>
</html>
